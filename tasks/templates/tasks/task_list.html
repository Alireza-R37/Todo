<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>لیست تسک‌ها</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Bootstrap RTL -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
  <style>
    body{background:#f7f7fb}
    .card-clean{border:0; border-radius:16px; box-shadow:0 10px 35px rgba(0,0,0,.08)}
    .list-group-item-action{display:flex; justify-content:space-between; align-items:start; gap:12px}
  </style>
</head>
<body>
  <div class="container py-4">
    <h1 class="h4 mb-3">تسک‌ها</h1>

    <ul class="list-group card-clean p-3">
      <li class="list-group-item bg-transparent border-0 p-0 mb-2">
        <a href="{% url 'tasks:add_task' %}">
          <button class="btn btn-primary">اضافه کردن</button>
        </a>
      </li>

      {% for task in tasks %}
        <li class="list-group-item list-group-item-action">
          <div class="flex-grow-1">
            <span class="fw-semibold">{{ task.title }}</span>
            <small class="text-muted">
              - {% if task.complete %}انجام شده{% else %}در حال انجام{% endif %}
            </small>
          </div>
          <div class="d-flex gap-2">
            <a class="btn btn-sm btn-outline-secondary" href="{% url 'tasks:edittt_task' task.id %}">ویرایش</a>
            <a class="btn btn-sm btn-outline-danger" href="{% url 'tasks:delete_task' task.id %}">حذف</a>
          </div>
        </li>
      {% empty %}
        <li class="list-group-item">تسکی وجود ندارد.</li>
      {% endfor %}

      <li class="list-group-item bg-transparent border-0 p-0 my-2">
        <a class="btn btn-outline-secondary"
           href="{% url 'tasks:logout' %}?next={{ request.path }}">
          خروج
        </a>
      </li>

      <li class="list-group-item bg-transparent border-0 p-0">
        {% if request.user.is_authenticated %}
          وارد شده‌ای با: {{ request.user.get_username }}
        
        {% else %}
          وارد نشده‌ای
        {% endif %}
      </li>
    </ul>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
