
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css">
<style>
  /* پس‌زمینه‌ی لطیف برای بخش احراز هویت */
  .auth-wrap {
    min-height: calc(100vh - 64px);
    background:
      radial-gradient(1200px 400px at 100% -20%, rgba(94,96,206,.12), transparent 60%),
      radial-gradient(800px 300px at -10% 110%, rgba(0,191,166,.10), transparent 60%),
      #f7f7fb;
    display: flex; align-items: center; justify-content: center;
  }
  .card-clean { border-radius: 16px; box-shadow: 0 10px 35px rgba(0,0,0,.08); }
  .brand-badge{
    width:56px;height:56px;border-radius:50%;
    display:inline-flex;align-items:center;justify-content:center;
    background:rgba(94,96,206,.12);
  }
  .brand-badge svg{ width:24px;height:24px; }
  .form-control-lg{ border-radius: 12px; }
  .btn-brand{ background:#5E60CE; border-color:#5E60CE; border-radius:12px; }
  .btn-brand:hover{ filter:brightness(.95); }
  .muted-links a { text-decoration: none; }
  .muted-links a:hover { text-decoration: underline; }
  /* دکمه نمایش رمز */
  .toggle-eye{
    position:absolute; top:50%; transform:translateY(-50%);
    inset-inline-start: .5rem; /* در RTL سمت چپ، در LTR سمت راست */
  }
</style>

<div class="auth-wrap py-4">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-5">
        <div class="card card-clean border-0 overflow-hidden">
          <div class="card-body p-4 p-md-5">

            <div class="text-center mb-4">
              <div class="brand-badge mx-auto">
                <!-- آیکن ساده (SVG) -->
                <svg viewBox="0 0 24 24" fill="none"><path d="M4 12h9m7 0h-5m-4 7V5" stroke="#5E60CE" stroke-width="2" stroke-linecap="round"/></svg>
              </div>
              <h1 class="h4 mt-3 mb-1">خوش برگشتی 👋</h1>
              <p class="text-muted m-0">برای ادامه وارد حساب خود شوید</p>
            </div>

            {% if form.errors %}
              <div class="alert alert-danger mb-4" role="alert">
                نام کاربری یا رمز عبور نادرست است.
              </div>
            {% endif %}

            <form method="post" action="{% url 'tasks:login' %}" novalidate>
              {% csrf_token %}

              <!-- نام کاربری -->
              <div class="mb-3">
                <label class="form-label" for="id_username">نام کاربری</label>
                <input
                  type="text"
                  name="username"
                  id="id_username"
                  class="form-control form-control-lg"
                  placeholder="مثلا : Gholi "
                  value="{{ form.username.value|default_if_none:'' }}"
                  autocomplete="username"
                  required>
                {% if form.username.errors %}
                  <div class="invalid-feedback d-block">{{ form.username.errors.0 }}</div>
                {% endif %}
              </div>

              <!-- رمز عبور + دکمه نمایش -->
              <button style="display:inline-block; transform:translateY(56px);"  type="button" class="btn btn-sm btn-outline-secondary toggle-eye" onclick="togglePwd()" aria-label="نمایش/مخفی‌کردن رمز">
                👁
              </button>
              <div class="mb-3 position-relative">
                <label class="form-label" for="id_password">رمز عبور</label>
                <input
                  type="password"
                  name="password"
                  id="id_password"
                  class="form-control form-control-lg pe-5"
                  placeholder="رمز عبور"
                  autocomplete="current-password"
                  required>
                
                {% if form.password.errors %}
                  <div class="invalid-feedback d-block">{{ form.password.errors.0 }}</div>
                {% endif %}
              </div>

              <input type="hidden" name="next" value="{{ next }}">

              <button type="submit" class="btn btn-brand btn-lg w-100">ورود</button>
            </form>

            <hr class="my-4">

            <div class="d-flex flex-wrap gap-2 justify-content-between muted-links">
              <a href="{% url 'tasks:signup' %}">حساب ندارید؟ ثبت‌نام</a>
              <a href="{% url 'tasks:password_reset' %}">فراموشی رمز</a>
            </div>

          </div>
        </div>

        <!-- کپی‌رایت یا لینک کوچک دلخواه -->
      </div>
    </div>
  </div>
</div>

<script>
  function togglePwd(){
    const el = document.getElementById('id_password');
    el.type = (el.type === 'password') ? 'text' : 'password';
  }
</script>
